(function(e){function t(t){for(var n,o,c=t[0],i=t[1],l=t[2],u=0,p=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==r[i]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={app:0},s=[];function o(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"fb18f5dd"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=n);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=o(e);var l=new Error;s=function(t){i.onerror=i.onload=null,clearTimeout(u);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,a[1](l)}r[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/autorace-app/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),a("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-name-dark.png",width:"100"}})],1),a("v-spacer"),a("v-btn",{attrs:{href:"https://github.com/vuetifyjs/vuetify/releases/latest",target:"_blank",text:""}},[a("span",{staticClass:"mr-2"},[e._v("Latest Release")]),a("v-icon",[e._v("mdi-open-in-new")])],1)],1),a("v-main",[a("router-view")],1)],1)},s=[],o={name:"App",data:function(){return{}}},c=o,i=a("2877"),l=a("6544"),u=a.n(l),d=a("7496"),p=a("40dc"),f=a("8336"),v=a("132d"),m=a("adda"),h=a("f6c4"),y=a("2fa4"),g=Object(i["a"])(c,r,s,!1,null,null,null),b=g.exports;u()(g,{VApp:d["a"],VAppBar:p["a"],VBtn:f["a"],VIcon:v["a"],VImg:m["a"],VMain:h["a"],VSpacer:y["a"]});var w=a("9483");Object(w["a"])("".concat("/autorace-app/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});a("d3b7"),a("3ca3"),a("ddb0");var k=a("8c4f"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),a("Calendar")],1)},D=[],$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"fill-height"},[a("v-col",[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v(" Today ")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v(" mdi-chevron-left ")])],1),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v(" mdi-chevron-right ")])],1),e.$refs.calendar?a("v-toolbar-title",[e._v(" "+e._s(e.$refs.calendar.title)+" ")]):e._e(),a("v-spacer"),a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),n),[a("span",[e._v(e._s(e.typeToLabel[e.type]))]),a("v-icon",{attrs:{right:""}},[e._v(" mdi-menu-down ")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.type="day"}}},[a("v-list-item-title",[e._v("Day")])],1),a("v-list-item",{on:{click:function(t){e.type="week"}}},[a("v-list-item-title",[e._v("Week")])],1),a("v-list-item",{on:{click:function(t){e.type="month"}}},[a("v-list-item-title",[e._v("Month")])],1),a("v-list-item",{on:{click:function(t){e.type="4day"}}},[a("v-list-item-title",[e._v("4 days")])],1)],1)],1)],1)],1),a("v-sheet",{attrs:{height:"600"}},[a("v-calendar",{ref:"calendar",attrs:{color:"primary",events:e.events,"event-color":e.getEventColor,type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.setDate,change:e.updateRange},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-toolbar-title",{domProps:{innerHTML:e._s(e.selectedEvent.name)}})],1),a("v-chip",{staticClass:"ma-2",attrs:{color:e.selectedEvent.color}},[e._v(" "+e._s(e.selectedEvent.place)+" ")]),a("v-card-text",[a("span",{domProps:{innerHTML:e._s(e.selectedEvent.details)}})]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v(" Cancel ")])],1)],1)],1)],1)],1)],1)},x=[],C=a("2909"),P=(a("d81d"),a("4de4"),{data:function(){return{focus:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[],colors:{kawaguchi:"blue",isesaki:"indigo",hamamatsu:"deep-purple",iizuka:"cyan",sanyou:"green"},places:{kawaguchi:"川口",isesaki:"伊勢崎",hamamatsu:"浜松",iizuka:"飯塚",sanyou:"鉄壁山陽"},names:["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"]}},mounted:function(){this.$store.dispatch("fetchEvents"),this.$refs.calendar.checkChange()},methods:{viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},getEventColor:function(e){return e.color},setToday:function(){this.focus="";var e=new Date;this.$store.commit("setDate",e),this.$store.commit("setPlaces",{events:this.$store.state.events,date:e}),this.$store.commit("maybeChangePlace")},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this,a=e.nativeEvent,n=e.event,r=function(){t.selectedEvent=n,t.selectedElement=a.target,requestAnimationFrame((function(){return requestAnimationFrame((function(){return t.selectedOpen=!0}))}))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((function(){return requestAnimationFrame((function(){return r()}))}))):r(),a.stopPropagation()},updateRange:function(e){var t=this,a=e.start,n=e.end;if(null!==this.$store.state.events){var r=[],s=new Date("".concat(a.date,"T00:00:00"));s.setDate(s.getDate()-s.getDay());var o=new Date("".concat(n.date,"T23:59:59"));o.setDate(o.getDate()+6-o.getDay());var c=this.$store.state.events.filter((function(e){return a=new Date(e.start),n=new Date(e.end),s<=a&&a<=o||a<=s&&s<=n})).map((function(e){return{name:e.title,start:new Date(e.start),end:new Date(e.end),color:t.colors[e.place],timed:!1,details:e.range,place:t.places[e.place]}}));r.push.apply(r,Object(C["a"])(c)),this.events=r}else setTimeout((function(){t.updateRange({start:a,end:n})}),500)},setDate:function(e){var t=e.date;this.$store.commit("setDate",t),this.$store.commit("setPlaces",{events:this.$store.state.events,date:t}),this.$store.commit("maybeChangePlace")}}}),V=P,E=a("a4f6"),j=a("b0af"),O=a("99d9"),R=a("cc20"),T=a("62ad"),M=a("8860"),S=a("da13"),A=a("5d23"),H=a("e449"),L=a("0fd9"),q=a("8dd9"),z=a("71d9"),B=a("2a7f"),F=Object(i["a"])(V,$,x,!1,null,null,null),I=F.exports;u()(F,{VBtn:f["a"],VCalendar:E["a"],VCard:j["a"],VCardActions:O["a"],VCardText:O["b"],VChip:R["a"],VCol:T["a"],VIcon:v["a"],VList:M["a"],VListItem:S["a"],VListItemTitle:A["b"],VMenu:H["a"],VRow:L["a"],VSheet:q["a"],VSpacer:y["a"],VToolbar:z["a"],VToolbarTitle:B["a"]});var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"d-flex justify-space-around mb-6",attrs:{color:e.$vuetify.theme.dark?"grey darken-3":"grey lighten-4",flat:"",tile:""}},[a("div",{staticClass:"d-flex flex-column mb-6"},[a("v-card",{key:"4",staticClass:"pa-2",attrs:{outlined:"",tile:""}},[a("Datepicker",{attrs:{language:e.ja,format:"yyyy-MM-dd",value:e.date},on:{selected:e.updateDate}})],1),a("v-card",{key:"5",staticClass:"pa-2",attrs:{outlined:"",tile:""}},[a("v-select",{attrs:{items:e.places,value:e.place,label:"開催場所",outlined:""},on:{change:e.updatePlace}})],1)],1),a("div",{staticClass:"d-flex flex-column mb-6"},[a("v-card",{key:"6",staticClass:"pa-2",attrs:{outlined:"",tile:""}},[a("v-select",{attrs:{items:e.races,value:e.race,label:"レース",outlined:""},on:{change:e.updateRace}})],1),a("v-card",{key:"7",staticClass:"pa-2",attrs:{outlined:"",tile:""}},[a("v-row",[a("v-col",[a("v-switch",{attrs:{label:"Repeat"},model:{value:e.switch1,callback:function(t){e.switch1=t},expression:"switch1"}})],1),a("v-col",[a("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:e.play}},[e._v(" Play ")])],1)],1)],1)],1)])],1)},J=[],W=(a("c740"),a("fb6a"),a("99af"),a("fa33")),Y=a("2430"),G={name:"Home",components:{Datepicker:W["a"]},data:function(){return{ja:Y["ja"],switch1:!0}},methods:{updateDate:function(e){this.$store.commit("setDate",e),this.$store.commit("setPlaces",{events:this.$store.state.events,date:e}),this.$store.commit("maybeChangePlace")},updatePlace:function(e){var t={"川口":"kawaguchi","伊勢崎":"isesaki","浜松":"hamamatsu","飯塚":"iizuka","鉄壁山陽":"sanyou"};this.$store.commit("setPlace",t[e])},updateRace:function(e){var t=this.races.findIndex((function(t){return t===e}));this.$store.commit("setRace",t)},play:function(){var e={kawaguchi:"kawaguchi",isesaki:"isezaki",hamamatsu:"hama",iizuka:"iizuka",sanyou:"sanyou"},t=this.$store.state.race+1,a=e[this.$store.state.place],n=[];if(this.switch1)for(var r=t;r<=12;r++){var s=this.url(r,a,this.$store.state.date);n.push(s)}else{var o=this.url(t,a,this.$store.state.date);n.push(o)}console.log(n),this.$router.push({name:"Player",params:{urls:n}})},url:function(e,t,a){var n=("00"+e).slice(-2),r=new Date(a),s=r.getFullYear(),o=("00"+(r.getMonth()+1)).slice(-2),c=("00"+r.getDate()).slice(-2),i="https://sp-auto.digi-c.com/autorace/_definst_/".concat(t,"/").concat(s,"/").concat(t,"_").concat(s).concat(o).concat(c,"_").concat(n,"/playlist.m3u8");return i}},computed:{date:function(){return this.$store.state.date},places:function(){var e=this;return this.$store.state.places.map((function(t){return e.names[t]}))},place:function(){return this.names[this.$store.state.place]},races:function(){return["1R","2R","3R","4R","5R","6R","7R","8R","9R","10R","11R","12R"]},race:function(){return this.races[this.$store.state.race]},names:function(){return{kawaguchi:"川口",isesaki:"伊勢崎",hamamatsu:"浜松",iizuka:"飯塚",sanyou:"鉄壁山陽"}}}},K=G,Q=a("b974"),U=a("b73d"),X=Object(i["a"])(K,N,J,!1,null,null,null),Z=X.exports;u()(X,{VBtn:f["a"],VCard:j["a"],VCol:T["a"],VRow:L["a"],VSelect:Q["a"],VSwitch:U["a"]});var ee={name:"Home",components:{Calendar:I,Header:Z}},te=ee,ae=Object(i["a"])(te,_,D,!1,null,null,null),ne=ae.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{attrs:{id:"dplayer"}}),a("button",{on:{click:this.back}},[e._v("back")])])])},se=[],oe=a("ba56"),ce=a.n(oe),ie=a("f7a5"),le=a.n(ie),ue={props:{urls:Array},data:function(){return{dp:null,current:0}},mounted:function(){this.play()},methods:{play:function(){this.dp=new le.a({container:document.getElementById("dplayer"),screenshot:!0,video:{url:this.urls[this.current],type:"customHls",customType:{customHls:function(e){var t=new ce.a;t.loadSource(e.src),t.attachMedia(e)}}}}),this.dp.fullScreen.request("browser"),this.dp.on("ended",this.nextPlay),this.dp.on("abort",this.ended),this.dp.on("error",this.ended),this.dp.play()},nextPlay:function(){this.current++,this.urls.length>this.current?this.play():this.ended()},back:function(){this.$router.back()},ended:function(){this.back()}}},de=ue,pe=Object(i["a"])(de,re,se,!1,null,null,null),fe=pe.exports;n["a"].use(k["a"]);var ve=[{path:"/",name:"Home",component:ne},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/player",name:"Player",component:fe,props:!0}],me=new k["a"]({routes:ve}),he=me,ye=a("1da1"),ge=(a("96cf"),a("2f62"));n["a"].use(ge["a"]);var be=new ge["a"].Store({state:{events:null,date:(new Date).getHours()<17?(new Date).setDate((new Date).getDate()-1):new Date,place:null,places:[],race:7},mutations:{setEvents:function(e,t){e.events=t},setDate:function(e,t){e.date=t,e.places=e.events.filter((function(e){var a=new Date(e.start),n=new Date(e.end),r=new Date(t);return a<=r&&r<=n})).map((function(e){return e.place})),e.places.some((function(t){return t===e.place}))||(e.place=e.places[0])},setPlace:function(e,t){e.place=t},setRace:function(e,t){e.race=t},setPlaces:function(e,t){var a=t.events,n=new Date(t.date);e.places=a.filter((function(e){var t=new Date(e.start),a=new Date(e.end);return t<=n&&n<=a})).map((function(e){return e.place}))},maybeChangePlace:function(e){e.places.some((function(t){return t===e.place}))||(e.place=e.places[0])}},actions:{fetchEvents:function(e){return Object(ye["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null===e.state.events){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("https://admob-app-id-5452967350.firebaseio.com/events.json").then((function(e){return e.json()}));case 4:a=t.sent,e.commit("setEvents",a),e.commit("setPlaces",{events:a,date:e.state.date}),e.commit("maybeChangePlace");case 8:case"end":return t.stop()}}),t)})))()}},modules:{}}),we=a("f309");n["a"].use(we["a"]);var ke=new we["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:he,store:be,vuetify:ke,render:function(e){return e(b)}}).$mount("#app")}});
//# sourceMappingURL=app.696ed4ce.js.map